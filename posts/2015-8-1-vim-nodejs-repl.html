<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>jiangts: ClojureScript Node.js vim repl</title>
        <!-- <script src="//use.typekit.net/hhk0ocl.js"></script> -->
        <script>try{Typekit.load();}catch(e){}</script>
        <link href="../css/normalize.css" rel="stylesheet" type="text/css" />
        <link href="../css/skeleton.css" rel="stylesheet" type="text/css" />
        <link href="../css/custom.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
    </head>
    <body>
        <div class="container">
                <nav id="header">
                    <ul class="nav">
                        <li class="active"><a href="/blog/index.html">jiangts</a></li>
                        <li ><a href="/blog/archives.html">archive</a></li>
                        <li >
                            <a href="/blog/tags.html">tags</a>
                        </li>
                        
                        <li >
                            <a href="/blog/pages/about.html">About</a>
                        </li>
                        
                        <li><a href="/blog/feed.xml">RSS</a></li>
                    </ul>
                </nav>
            <div id="content">
                
<div id="post">
    <div id="post-header">
    <h2>ClojureScript Node.js vim repl</h2>
    <div class="date">August 1, 2015</div>
    <hr>
</div>
<div>
    
    <p>There are lots of great "plug-and-play" setups for ClojureScript in the browser, like Figwheel and Chestnut. However, getting a good REPL environment for ClojureScript targeting Node.js seemed quite under-documented. After consulting numerous resources (many of which, uh, how should I say, may or may not have been really outdated), here's how I did it:</p><ol><li>Get a starter ClojureScript Project<pre><code>$ lein new mies replicious
</code></pre></li><li>Follow basic directions in the README.md<ul><li>in particular, run <code>lein npm install</code></li><li>also just a note: if you try to run <code>./scripts/repl</code> as advertised in the      README it won't work! To fix it, you need to alter the      <code>./scripts/repl.clj</code> file by changing the function call from `(repl/repl*      ...)<code> to </code>(repl/repl ...)`.</li></ul></li><li>Include Cemerick's <a href='https://github.com/cemerick/piggieback'>piggieback</a><ul><li>Add this snippet to your <code>project.clj</code><pre><code>:profiles  {:dev  {:dependencies  &#91;&#91;com.cemerick/piggieback &quot;0.2.1&quot;&#93;
                                     &#91;org.clojure/tools.nrepl &quot;0.2.10&quot;&#93;&#93;
                     :repl-options  {:nrepl-middleware  &#91;cemerick.piggieback/wrap-cljs-repl&#93;}}}
</code></pre></li></ul></li><li>In the repl, do the following:<pre><code>$ lein repl
...
user=&gt; &#40;require '&#91;cljs.repl.node :as node&#93;&#41;
nil
</code></pre></li><li>In fireplace, run<pre><code>:Piggieback &#40;node/repl-env&#41;
</code></pre></li><li>Try it out!<ul><li>One last roadblock I encountered was the issue described      <a href='https://github.com/tpope/vim-fireplace/issues/220'>here</a>.</li><li>I fixed it by simply updating to the latest version of fireplace :) (almost      too easy!).</li></ul></li></ol><p><hr></p><p>I think this is actually the first time I've successfully gotten fireplace to connect to a ClojureScript repl. I remember having some trouble connecting fireplace to the browser repls provided by figwheel/chestnut, so in those environments, I just live reload stuff and observe the output of the web console. Fast enough, but I think this will be even better :).</p>
</div>


<div id="tags">
    <b>Tags: </b>
    
    <a href="/blog/tags/ClojureScript.html">ClojureScript</a>
    
</div>


    <div id="prev-next">
        
        
        
        <span class="pull-right"><a href="/blog/posts/2015-7-31-sophomore-fall.html">Sophomore Fall &raquo;</a></span>
        
    </div>

    


</div>

            </div>
            <footer>
                Copyright &copy; 2015 Allan Jiang<br>
                <span>
                    <a href="https://github.com/jiangts">Github</a> &nbsp;
                    <a href="https://linkedin.com/in/jiangts">LinkedIn</a> &nbsp;
                    <a href="https://twitter.com/jiangts">Twitter</a> &nbsp;
                </span><br>
                Powered by <a href="https://github.com/lacarmen/cryogen">Cryogen</a>
            </footer>
        </div>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="../js/highlight.pack.js" type="text/javascript"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
